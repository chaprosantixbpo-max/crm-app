<!DOCTYPE html>
<html>
<head>
<title>CRM Login</title>
<style>
    body { font-family: Arial; margin: 20px; }
    #mainArea, #adminPanel { display: none; }
    label { font-weight: bold; }
    .hidden { display:none; }
</style>
</head>

<body>

<h2>CRM Login</h2>

<div id="loginArea">
    <input id="loginUser" placeholder="Username"><br><br>
    <input id="loginPass" placeholder="Password" type="password"><br><br>
    <button id="btnLogin">Login</button>
    <button id="btnDemo">Demo</button>
    <p id="loginMsg" style="color:red; display:none;"></p>
</div>

<div id="mainArea">

    <h3>Welcome, <span id="agentName"></span></h3>
    <button onclick="logout()">Logout</button>
    <hr>

    <h3>Lookup Customer</h3>
    <input id="lookupPhone" placeholder="Enter phone #">
    <button id="btnLookup">Lookup</button>

    <div id="customerBox" class="hidden">
        <h3>Customer Details</h3>
        <div id="cust"></div>
    </div>

    <hr>

    <h3>Questions</h3>

    <label>Military Opening</label>
    <select id="militaryOpening">
        <option></option><option>Yes</option><option>No</option><option>Unsure</option>
    </select><br><br>

    <label>Military Q1</label>
    <select id="militaryQ1">
        <option></option><option>You</option><option>Household</option><option>No</option><option>Unsure</option>
    </select><br><br>

    <label>Military Q2</label>
    <select id="militaryQ2">
        <option></option><option>Army</option><option>Navy</option><option>Airforce</option><option>Reservists / TA</option>
    </select><br><br>

    <label>Military Q3</label>
    <select id="militaryQ3">
        <option></option><option>After 1987</option><option>Before 1987</option><option>Still serving</option><option>Retired</option>
    </select><br><br>

    <label>Scotland Q1</label>
    <select id="scotlandQ1">
        <option></option><option>Yes</option><option>No</option><option>Unsure</option>
    </select><br><br>

    <label>Scotland Q2</label>
    <select id="scotlandQ2">
        <option></option><option>Children’s Home</option><option>Residential School</option><option>Foster Care</option><option>Another setting</option>
    </select><br><br>

    <label>UK Q1</label>
    <select id="ukQ1">
        <option></option><option>Yes</option><option>No</option><option>Unsure</option>
    </select><br><br>

    <label>UK Q2</label>
    <select id="ukQ2">
        <option></option>
        <option>Children’s Home</option><option>School</option><option>Sunday School</option>
        <option>Youth Group</option><option>Church Activity</option>
    </select><br><br>

    <label>Notes</label><br>
    <textarea id="notes" rows="3" cols="40"></textarea><br><br>

    <label>Disposition</label>
    <select id="disposition">
        <option></option><option>Lead</option><option>Callback</option><option>Not Interested</option>
    </select><br><br>

    <button id="btnSave">SAVE</button>

    <hr>

    <div id="adminPanel">
        <h2>Admin Panel</h2>
        <button id="btnLoadResponses">Load All Saved Leads</button>
        <div id="responseTable"></div>
    </div>

</div>

<!-- ========================= -->
<!-- REAL WORKING JS SECTION -->
<!-- ========================= -->
<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwOmOk6FL59mZSuK6J7tS9u3TLa27_0we8iV2PShusLumJ0BemGwdnfobucEFMtFPY-/exec";

const el = id => document.getElementById(id);

/* SHA256 */
async function sha256Hex(text) {
    const buf = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(text));
    return [...new Uint8Array(buf)].map(b => b.toString(16).padStart(2,'0')).join('');
}

/* ================= LOGIN =================*
